# توضیح متغیر ها در انسیبل

## مقدمه و هدف

توی این داکیومنت می‌خوایم ببینیم `host_vars` و `group_vars` چی هستن و چه استفاده‌ای دارن. این دو تا یکی از بخش‌های مهم مدیریت متغیرها توی انسیبل هستن و کمک می‌کنن رفتار سرورها رو تمیز، جدا و قابل‌کنترل نگه داریم.

## توضیح vars

برای اینکه کارمون توی انسیبل راحت‌تر بشه و بتونیم حالت‌های مختلف رو مدیریت کنیم، از متغیرها استفاده می‌کنیم.  
انسیبل خودش یه سری متغیر داره که از خود سیستم‌ها می‌گیره، مثل مشخصات سخت‌افزاری، شبکه و چیزهایی که خود هاست گزارش می‌کنه. ما هم می‌تونیم متغیرهای دلخواه خودمون رو بسازیم.

# توضیح host_vars

اگر بخوایم برای **یک هاست مشخص** متغیر تعریف کنیم، از `host_vars` استفاده می‌کنیم.

توی ساختار پروژه یک پوشه داریم به اسم `host_vars` و داخلش برای هر هاست یه فایل جدا می‌سازیم:

```
host_vars -> {hostname}.yml
```

اسم فایل باید همون اسم هاستی باشه که داخل inventory تعریف کردیم.  
برای مثال اگر اسم هاست `host.example.ir` باشه، فایل میشه:

```
host.example.ir.yml
```

و داخلش متغیرها رو می‌ذاریم:

```yml
---
var1: "Test"
user: "user_host"
password: "user_pass"
```

این متغیرها فقط برای همین هاست قابل دسترس هستن.

# توضیح group_vars

گاهی لازم داریم یه سری متغیر برای کل یک **گروه** تعریف کنیم. اینجا از `group_vars` کمک می‌گیریم.

داخل پوشه `group_vars` یه فایل می‌سازیم که اسمش همون اسم گروهمونه. مثلاً:

```
group_vars -> web.yml
group_vars -> db.yml
```

هرچی متغیر توی این فایل‌ها بذاریم، برای تمام هاست‌های اون گروه قابل استفاده‌ست.

**نکته:**  
معمولاً کمتر پیش میاد برای یک هاست خاص متغیر بذاریم؛ بیشتر وقت‌ها متغیرها در سطح گروه تعریف می‌شن.  
اگه دیتای حساسی مثل پسورد داریم، بهتره با vault رمزگذاریش کنیم و به شکل خام داخل فایل نذاریم.

## جمع‌بندی

به طور خلاصه، `host_vars` مخصوص متغیرهای یک هاست خاصه و `group_vars` برای متغیرهای مشترک بین چند هاست. این تقسیم‌بندی باعث میشه هم مدیریت تنظیمات راحت‌تر بشه و هم ساختار پروژه تمیز و قابل‌گسترش بمونه. از vault هم برای داده‌های حساس استفاده می‌کنیم تا امنیت حفظ بشه.

## منابع
[دوره انسیبل مرتضی باشسیز](https://youtu.be/S9XUZbRihb4?si=K5-mDgZPUbPvn8Qu)
