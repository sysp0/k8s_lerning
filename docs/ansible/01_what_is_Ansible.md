# انسیبل چیست؟
## مقدمه و هدف
در این داکیومنت چرایی نیاز به انسیبل و مشکلی که حل میکند رو باهم بررسی میکنیم. سعی میکنم مشکلی که هست رو توضیح بدیم و بگیم که انسیبل این مشکل رو چگونه حل میکند.
## توضیح موضوع
### چرا ما به Ansible نیاز داریم؟
تصور کنید شما داخل یک سازمانی هستید که زیرساخت بزرگی داره. که شامل سرور ها، سرویس ها و یک سری عملیات هست که روتین هستش روزی یکبار، ماهی یکبار، یا سالی یکبار.

ما یک سری تسک هایی رو داریم که باید روی یک سری از سرور ها انجام شود.

توی روش عادی: وصل میشیم به سرور و کارهای مورد نظرمون رو انجام میدیم.
حالا مشکلاتی که دارد:
- اگر سرور ها زیاد باشند زمان گیر میشود
- تغیراتی که دادیم رو جایی بصورت دقیق مستند سازی نشده است. ( ممکن هست یادمان برود )

برای مثال ما ۲۵ عملیات زیر را داریم:
- Task 1
- Task 2
- ...
- Task 25

که این کار ها باید روزی یک بار انجام شود. توی این حالت دیگه روش دستی جواب نمیدهد و احتمال خطا بالا هستش.

همچنین کار های زیر هم داریم:
- نصب سرویس
- کانفیگ سرویس 
- اجرا bash روی سرور ها

حتی کار های پیچیده تر رو هم داریم: 
- تغیرات روی دیتابیس 
- آپدیت کد بیس 

برای مثال این کار هارو باید روزی دو بار یا چندین بار در روز نیاز داریم که انجام بدهیم 
![[docs/images/User_ssh.png]]

مشکلاتی که این حالت داره( SSH بصورت دستی ):
- اطمینان از درستی کار
- روتین و خسته کننده
- کاملا استاتیک
- اگر سرور ها زیاد شود غیر ممکن میشود

برای مدیریت زیرساخت قسمت های زیرو داریم:
- نگهداری
- نصب
- گسترش
- آپدیت
- کار های دیگری برای مدیریت سرور ها

### مدیریت زیر ساخت های بزرگ چطور انجام میشود؟
یک سری ابزار هایی به نام Configuration management tools هستند که مخصوص مدیریت زیر ساخت هستند مثل:
- Puppet
- Chef
- Ansible
این ابزار ها به ما این امکان رو میدهند که زیر ساخت رو راحت تر مدیریت بکنیم. 

برای مثال حتی اگر یک دونه هم سرور داشته باشیم میتوانیم از این ابزار استفاده کنیم تا هر تغیری روی کانفیگ اتفاق می افته میتوان داکیومنت و تاریخچه رو با استفاده از Git مدیریت کرد و همچنین اگر سرور از دست برود در کمتر از چند ساعت دوباره سرور جایگزین میشود.

حتی اگر یک سری کار های روتین داریم که باید هر روز اجرا شود میتوانیم یک بار با انسیبل بنویسیم و فقط اون اجرا کنیم. 
![[docs/images/Server_Roles.png]]

هر کدوم از سرور هامون یک Role دارند، حالا ما میخواهیم این سرور هارو مدیریت کنیم

### هدف در انسیبل
هدف ما این هست یک سری Task داریم و میخواهیم روی یک سری Node این کار ها انجام بشود و این Task ها رو بر اساس Role انجام میدهیم.
## جمع‌بندی
- ابزار Ansible ابزاری برای خودکارسازی و مدیریت زیرساخت است که کارهای تکراری را از طریق تعریف دستورالعمل‌های قابل تکرار و نسخه‌پذیر (به‌صورت کد) انجام می‌دهد.
- با استفاده از Ansible می‌توان نصب، پیکربندی، اجرای اسکریپت و به‌روزرسانی‌ها را روی تعداد زیادی نود به‌صورت همزمان و قابل‌اعتماد انجام داد.
- مزایا: کاهش خطاهای انسانی، مستندسازی تغییرات با کد (قابلیت ذخیره در Git)، بازتولیدپذیری و مقیاس‌پذیری مدیریت سرورها.
- الگو (Role)ها و Playbookها امکان سازمان‌دهی وظایف بر اساس نقش سرویس‌ها را می‌دهند و استفاده مجدد را ساده می‌کنند.
- پیشنهاد عملی: برای کارهای روزانه، نصب/پیکربندی سرویس‌ها و استقرار کد از Ansible استفاده شود تا زمان صرفه‌جویی و پایداری افزایش یابد.
## منابع
[دوره انسیبل مرتضی باشسیز](https://youtu.be/ww4yY5ipYgo?si=Kv5uVsBcivon4RKE)
